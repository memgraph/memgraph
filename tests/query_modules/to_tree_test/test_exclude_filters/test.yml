query: >
  MATCH p = (person:Person)-[:OWNS]->(car:Car)
  WITH collect(p) AS paths
  CALL convert_c.to_tree(paths, false, {
    nodes: {
      Person: ["-email", "-city"],
      Car: ["-price"]
    },
    rels: {
      OWNS: ["-warranty"]
    }
  }) YIELD value
  RETURN value.name AS name,
         value.age AS age,
         value.city AS city,
         value.email AS email,
         size(value.OWNS) AS car_count,
         [car IN value.OWNS | car.model] AS car_models,
         [car IN value.OWNS | car.price] AS car_prices,
         [car IN value.OWNS | keys(car)] AS car_keys
  ORDER BY name

output:
  - name: Alice
    age: 30
    city: null
    email: null
    car_count: 1
    car_models: ["Toyota"]
    car_prices: [null]
    car_keys: [["OWNS._id", "OWNS.since", "OWNS.status", "_id", "_type", "color", "model", "year"]]
  - name: Bob
    age: 25
    city: null
    email: null
    car_count: 1
    car_models: ["Honda"]
    car_prices: [null]
    car_keys: [["OWNS._id", "OWNS.since", "OWNS.status", "_id", "_type", "color", "model", "year"]]
