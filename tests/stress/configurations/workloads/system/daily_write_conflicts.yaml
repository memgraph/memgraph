memgraph:
  deployment:
    # Script needs to be located in stress/configurations/deployments
    script: "binary_standalone.sh"
  args: [] # Any additional flags you need

general:
  verbose: false
  use_ssl: false

dataset:
  tests: []

customWorkloads:
  tests:
    - name: write-write-conflicts
      memgraph_args: ["--memory-limit=4000"]
      querying:
        host: "localhost"
        port: 7687
      import:
        queries:
          - "CREATE (:Supernode)"
          - "CREATE INDEX ON :Supernode"
      workers:
        # Metrics collection worker - runs continuously during the test
        - name: metrics-collector
          type: metrics
          num_repetitions: 20
          sleep_millis: 5000
          querying:
            host: "localhost"
            port: 9091
          step: 1
          metrics:
            - vertex_count
            - QueryExecutionLatency_us_50p
            - QueryExecutionLatency_us_90p
            - QueryExecutionLatency_us_99p
            - WriteWriteConflicts

        # Writer worker - simulates write workload
        - name: write-queries
          type: retriable-writer
          query: "UNWIND range(1, 1000) as x MATCH (s:Supernode) CREATE (s)-[:CONNECTED_TO]->(:Node)"
          num_repetitions: 100
          sleep_millis: 0
          step: 1
          replicas: 5
      timeout_min: 2
