memgraph:
  deployment:
    type: ha
  installation:
    type: default
  args:
    - "--telemetry-enabled=false"
    - "--bolt-num-workers=10"
    - "--bolt-server-name-for-init=Neo4j/"
    - "--storage-properties-on-edges=true"
    - "--storage-snapshot-on-exit=true"
    - "--storage-snapshot-interval-sec=600"
    - "--storage-snapshot-retention-count=1"
    - "--storage-wal-enabled=true"
    - "--query-execution-timeout-sec=1200"
    - "--log-level=ERROR"
    - "--also-log-to-stderr=true"

general:
  verbose: false
  use_ssl: false

dataset:
  tests: []

customWorkloads:
  tests:
    - name: multitenancy-high-load
      memgraph_args: []
      import:
        queries:
          [
            "CREATE DATABASE db1;",
            "CREATE DATABASE db2;",
            "CREATE DATABASE db3;",
            "CREATE DATABASE db4;",
            "CREATE DATABASE db5;",
            "CREATE DATABASE db6;",
            "CREATE DATABASE db7;",
            "CREATE DATABASE db8;",
            "CREATE DATABASE db9;",
            "CREATE DATABASE db10;",
            "CREATE DATABASE db11;",
            "CREATE DATABASE db12;",
            "CREATE DATABASE db13;",
            "CREATE DATABASE db14;",
            "CREATE DATABASE db15;",
            "CREATE DATABASE db16;",
            "CREATE DATABASE db17;",
            "CREATE DATABASE db18;",
            "CREATE DATABASE db19;",
            "CREATE DATABASE db20;",
            "CREATE DATABASE db21;",
            "CREATE DATABASE db22;",
            "CREATE DATABASE db23;",
            "CREATE DATABASE db24;",
            "CREATE DATABASE db25;",
            "CREATE DATABASE db26;",
            "CREATE DATABASE db27;",
            "CREATE DATABASE db28;",
            "CREATE DATABASE db29;",
            "CREATE DATABASE db30;",
            "CREATE DATABASE db20;",
            "CREATE DATABASE db31;",
            "CREATE DATABASE db32;",
            "CREATE DATABASE db33;",
            "CREATE DATABASE db34;",
            "CREATE DATABASE db35;",
            "CREATE DATABASE db36;",
            "CREATE DATABASE db37;",
            "CREATE DATABASE db38;",
            "CREATE DATABASE db39;",
            "CREATE DATABASE db40;",
            "CREATE DATABASE db41;",
            "CREATE DATABASE db42;",
            "CREATE DATABASE db43;",
            "CREATE DATABASE db44;",
            "CREATE DATABASE db45;",
            "CREATE DATABASE db46;",
            "CREATE DATABASE db47;",
            "CREATE DATABASE db48;",
            "CREATE DATABASE db49;",
            "CREATE DATABASE db50;",
            "CREATE DATABASE db51;",
            "CREATE DATABASE db52;",
            "CREATE DATABASE db53;",
            "CREATE DATABASE db54;",
            "CREATE DATABASE db55;",
            "CREATE DATABASE db56;",
            "CREATE DATABASE db57;",
            "CREATE DATABASE db58;",
            "CREATE DATABASE db59;",
            "CREATE DATABASE db60;",
            "CREATE DATABASE db61;",
            "CREATE DATABASE db62;",
            "CREATE DATABASE db63;",
            "CREATE DATABASE db64;",
            "CREATE DATABASE db65;",
            "CREATE DATABASE db66;",
            "CREATE DATABASE db67;",
            "CREATE DATABASE db68;",
            "CREATE DATABASE db69;",
            "CREATE DATABASE db70;",
            "CREATE DATABASE db71;",
            "CREATE DATABASE db72;",
            "CREATE DATABASE db73;",
            "CREATE DATABASE db74;",
            "CREATE DATABASE db75;",
            "CREATE DATABASE db76;",
            "CREATE DATABASE db77;",
            "CREATE DATABASE db78;",
            "CREATE DATABASE db79;",
            "CREATE DATABASE db80;",
            "CREATE DATABASE db81;",
            "CREATE DATABASE db82;",
            "CREATE DATABASE db83;",
            "CREATE DATABASE db84;",
            "CREATE DATABASE db85;",
            "CREATE DATABASE db86;",
            "CREATE DATABASE db87;",
            "CREATE DATABASE db88;",
            "CREATE DATABASE db89;",
            "CREATE DATABASE db90;",
            "CREATE DATABASE db91;",
            "CREATE DATABASE db92;",
            "CREATE DATABASE db93;",
            "CREATE DATABASE db94;",
            "CREATE DATABASE db95;",
            "CREATE DATABASE db96;",
            "CREATE DATABASE db97;",
            "CREATE DATABASE db98;",
            "CREATE DATABASE db99;",
            "CREATE DATABASE db100;",
          ]
      # 100 iterations x (2 nodes + 1 edge) = 200 nodes, 100 edges
      # repetitions 1000 -> 200k nodes and 100k edges
      # 20 workers -> 4M nodes and 2M edges
      workers:
        - name: dummy-worker
          type: random-multitenant-worker
          step: 1
          query: >
            UNWIND range(1, 100) as x
            CREATE (:Node {int_prop: x, str_prop: "hehe", my_map: {gender: "M", age: 25, nested: {prop: 1}}})-[:HAS_TYPE]->(:Node {int_prop: x, str_prop: "hehe", my_map: {gender: "M", age: 25, nested: {prop: 1}}});
          num_repetitions: 100
          sleep_millis: 0
          replicas: 20
      timeout_min: 100
