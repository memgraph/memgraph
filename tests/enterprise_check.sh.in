#!/bin/bash
# This script was generated by CMake

# Variable set by CMake
MG_ENTERPRISE=@MG_ENTERPRISE@

check_license() {
  if [ -v MEMGRAPH_ORGANIZATION_NAME ] && [ -v MEMGRAPH_ENTERPRISE_LICENSE ]; then
    echo "NOTE: MEMGRAPH_ORGANIZATION_NAME or MEMGRAPH_ENTERPRISE_LICENSE defined"
    ret_val=0
  else
    echo "NOTE: MEMGRAPH_ORGANIZATION_NAME or MEMGRAPH_ENTERPRISE_LICENSE NOT defined"
    ret_val=1
  fi
}

check_enterprise() {
  if [ "$MG_ENTERPRISE" == "ON" ]; then
    echo "NOTE: Memgraph was built with MG_ENTERPRISE=ON"
    ret_val=0
  else
    echo "NOTE: Memgraph was built with MG_ENTERPRISE=OFF"
    ret_val=1
  fi
}

check_mode() {
  local ret_val=-1
  check_enterprise
  local enterprise=$ret_val
  ret_val=-1
  check_license
  local license=$ret_val
  if [ $enterprise -eq 0 ] && [ $license -eq 0 ]; then
    echo "Running in ENTERPRISE mode"
    mode=0
  else
    echo "Running in COMMUNITY mode"
    mode=1
  fi
}
